Александр Мосин, [06.06.2025 11:38]
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>adhesion</title>
  <script async src="https://yandex.ru/ads/system/header-bidding.js"></script>
  <script>
    var adfoxBiddersMap = {
      betweenDigital: "867894",
      myTarget: "867892",
      buzzoola: "1186538",
    };
    var adUnits = [];
    var userTimeout = 1000;
    window.YaHeaderBiddingSettings = {
      biddersMap: adfoxBiddersMap,
      adUnits: adUnits,
      timeout: userTimeout,
    };
  </script>
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
  <script src="https://s3.wi-fi.ru/mtt/banners/libs/release/all.js"></script>
    <style>

.mtt-adhesion-container--wide .mtt-adhesion-banner {
    display: block;
    max-height: 30vh;
}

/* .mtt-adhesion-container--wide .mtt-adhesion-banner {
  display: unset; 
} */

/* .mtt-adhesion-container--a .mtt-adhesion-button {
    top: 50% !important;
    left: 0;
    margin-top: -10px;
} */

.mtt-adhesion-container {
  opacity: 0 !important;
}

.adhesion-video {
  opacity: 1 !important;
}


  </style>
</head>

<body>
  <div class="container">
    <p class="text">
      Lorem ipsum, dolor sit amet consectetur adipisicing elit. Praesentium distinctio possimus eum tenetur delectus
      fuga repudiandae dolorem dolor, nisi, perspiciatis, at perferendis voluptates totam consequatur soluta tempore
      pariatur adipisci quisquam?
      Dolore iusto est cumque ab provident sapiente rerum, totam mollitia placeat et labore quasi porro nostrum eos
      tempora explicabo obcaecati rem aliquid minima at delectus laudantium. Veniam expedita aliquid architecto.
      Incidunt id animi dolores delectus pariatur, cumque tempora tempore in consectetur, quae dolorem quod doloremque
      quo a ut porro, illo neque expedita inventore repellendus. At repellendus doloremque maiores ipsam id.
      Itaque minus in cupiditate ad atque, repellendus et autem veritatis facere! Labore cumque odit iure cum doloribus
      est quo blanditiis necessitatibus neque aliquam. Nobis qui labore nihil voluptate obcaecati quod.
      Quo quam consectetur, esse vero eveniet dolorem commodi a. Voluptas ab commodi consequuntur animi, consectetur
      nemo pariatur fuga recusandae nam fugit a corporis eius. Repudiandae amet nam fuga cum nemo?
      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Eos vitae sapiente, odit fugit repellendus maiores
      consequuntur possimus distinctio quas, animi explicabo velit ut saepe facilis porro tempore, quibusdam laudantium
      commodi!
      Consequatur ullam maxime, ratione harum sint, aspernatur laudantium expedita sed, deserunt distinctio voluptate
      libero. Architecto quam earum excepturi? Doloremque sed quos corrupti molestias ipsam eligendi nemo eaque iste aut
      vitae.
      Necessitatibus, dicta, assumenda perspiciatis doloremque recusandae in quos corporis quod dolorem ullam minus hic
      natus consectetur rem sapiente, ab molestias cupiditate modi est reiciendis culpa? Fugiat, incidunt velit? Eaque,
      voluptas.
    </p>
  </div>

<script>
  window.MTT.adhesion({
    adfox: {
      ownerId: 277740,
      paramsAdaptive: {
        mobile: {
          p1: "dbwiy",
          p2: "gdwh",
        },
      },
    },
    banner: {
      minimizable: true,
      backgroundColor: "#fbfbfb",
      reloadDelay: 30,
      maxReloads: 2,
      adProvider: (container, callback) => {
        if (!container) {
          callback('LOADED');
          return;
        }
        
        const targetContainer = document.querySelector(".mtt-adhesion-container");
        const targetBanner = document.querySelector(".mtt-adhesion-banner");
        
        if (targetContainer && targetBanner) {
          targetBanner.style.height = "225px";
        }

        document.querySelector('.mtt-adhesion-button.mtt-adhesion-button--minimize')?.addEventListener('click', () => {
          targetContainer?.remove();
        });


        const adv = document.createElement('iframe');
        adv.id = 'iframe';
        adv.src = "https://static.wi-fi.ru/special/player/?p1=dgwun&pack=fotostrana&adhesion=true";
        adv.style.width = '100%';
        adv.style.height = '100%';
        adv.style.border = 'none';
        adv.allow = 'clipboard-write; autoplay';
        document.body.appendChild(adv);

        const showBannerTimeout = setTimeout(() => {
          targetContainer?.classList.add('adhesion-video');
        }, 500);



        const loadFallbackBanner = () => {
          window.MTT.adhesion({
            adfox: {
              ownerId: 277740,
              params: {
                p1: "dbwiy",
                p2: "gdwh",
              },
              onLoad: () => {
                setTimeout(() => {
                  const container = document.querySelector('.mtt-adhesion-container');
                  container?.classList.add('adhesion-video');
                }, 500);
              }
            },
            banner: {
              backgroundColor: "#fbfbfb",
              refresh: 30,
              minimizable: true,
            },
          });
        };

        const handleMessage = (event) => {
          switch (event.data) {
            case "no_banner":
              clearTimeout(showBannerTimeout);
              targetContainer?.remove();
              loadFallbackBanner();
              break;

            case "completed":
              targetContainer?.remove();
              loadFallbackBanner();
              break;
          }
        };

        window.addEventListener('message', handleMessage);
        callback('LOADED');
      },
    },
  });
      
</script>
</body>

</html>